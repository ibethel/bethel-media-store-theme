{%- if item_limit == blank -%}
  {%- assign item_limit = 4 -%}
{%- endif -%}

{%- if paginate != blank and paginate.current_page > 1 -%}

  {%- render 'offset-collection-row-items',
    bmpi_classes: "mb-4",
    item_limit: item_limit,
    item_offset: item_offset,
    item_width_desk: item_width_desk,
    item_width_max: item_width_max,
    item_width_phone: item_width_phone,
    item_width_tablet: item_width_tablet,
    product_array: collection.products -%}

  {%- else -%}

  {%- for product in product_array offset: item_offset limit: item_limit -%}

    {%- if product.variants.size == 1 -%}
      {%- assign show_compare_price = true -%}
    {%- endif -%}

    {%- render 'bm-prod-item',
      bmpi_classes: bmpi_classes,
      bmpi_img: product.featured_image,
      bmpi_title: product.title,
      bmpi_url: product.url,
      compare_price: product.compare_at_price,
      compare_price_color: compare_price_color,
      compare_price_varies: product.compare_at_price_varies,
      enable_styles: enable_styles,
      font_italic: font_italic,
      font_size: font_size,
      font_weight: font_weight,
      price: product.price,
      price_classes: "bm-colors-color-grey-50",
      price_color: price_color,
      price_color_sale: price_color_sale,
      price_varies: product.price_varies,
      show_compare_price: show_compare_price,
      text_color: text_color,
      image_widths: "180,360,540,720,900",
      item_width_desk:item_width_desk,
      item_width_max: item_width_max,
      item_width_phone: item_width_phone,
      item_width_tablet: item_width_tablet -%}

  {%- endfor -%}
{%- endif -%}
