{%- assign aria_labelledby = "banner-" | append: section.id -%}
{%- assign section_titles = section_blocks | where: "type", "section_title" -%}

{%- capture labelledby -%}
  {%- render 'helper-labelledby-title-blocks',
    title_blocks: section_titles -%}
{%- endcapture -%}

{%- assign show_background = false -%}
{%- if enable_background and background_color != blank -%}
  {%- assign show_background = true -%}
{%- endif -%}

{%- if is_a_section -%}
  <section
    class="image-with-text {{ section_margin_phone }} {{ section_margin_tablet }} {{ section_margin_desk -}}

      {%- if enable_hide_scroll %} bm-hide-scroll{% endif %}"

    {%- if labelledby != blank -%}
      aria-labelledby="{{- aria_labelledby -}}"
    {%- endif -%}
  >
  {%- else -%}
    <div
      class="image-with-text {{ section_margin_phone }} {{ section_margin_tablet }} {{ section_margin_desk -}}

        {%- if enable_hide_scroll %} bm-hide-scroll{% endif %}"

      {%- if labelledby != blank -%}
        aria-labelledby="{{- aria_labelledby -}}"
      {%- endif -%}
    >
{%- endif -%}

  <div
    class="image-with-text__container

      {%- if show_background -%}
        {%- if enable_contain %} py-3 py-xl-5
          {%- else %} p-3 p-xl-5
        {%- endif -%}
      {%- endif -%}"

    {%- if show_background -%}
      style="background-color: {{- background_color -}};"
    {%- endif -%}
  >
    <div
      class="image-with-text__wrapper

        {%- if enable_full_width == false -%}
          {%- if enable_contain %} container-xl px-3
            {%- else -%}
              {%- if show_background == false %} px-3 px-xl-5{%- endif -%}
          {%- endif -%}
        {%- endif -%}"
    >

      {%- render 'image-with-text-main',
        aria_labelledby: aria_labelledby,
        autoplay: autoplay,
        content_width_desk: content_width_desk,
        content_width_tablet: content_width_tablet,
        controls: controls,
        enable_background: enable_background,
        enable_contain: enable_contain,
        enable_full_width: enable_full_width,
        enable_text_section_styles: enable_text_section_styles,
        horiz_align_desk: horiz_align_desk,
        horiz_align_phone: horiz_align_phone,
        horiz_align_tablet: horiz_align_tablet,
        iframe_url: iframe_url,
        img_breakpoint_pos: img_breakpoint_pos,
        image_desk: image_desk,
        image_max: image_max,
        image_phone: image_phone,
        image_tablet: image_tablet,
        image_pos: image_pos,
        img_width_desk: img_width_desk,
        img_width_tablet: img_width_tablet,
        interaction: interaction,
        loop: loop,
        main_breakpoint: main_breakpoint,
        mp4_url: mp4_url,
        section_blocks: section_blocks,
        show_background: show_background,
        space_between_img_txt: space_between_img_txt,
        text_alignment_desk: text_alignment_desk,
        text_alignment_tablet: text_alignment_tablet,
        text_alignment_phone: text_alignment_phone,
        text_background: text_background,
        vert_align_desk: vert_align_desk,
        vert_align_phone: vert_align_phone,
        vert_align_tablet: vert_align_tablet,
        video_thumbnail: video_thumbnail,
        video_visibility: video_visibility -%}

    </div>
  </div>

{%- if is_a_section -%}
  </section>
  {%- else -%}
    </div>
{%- endif -%}
