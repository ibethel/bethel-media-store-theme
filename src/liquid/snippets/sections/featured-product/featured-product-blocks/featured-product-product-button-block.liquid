{%- assign enable_button_styles = block.settings.enable_button_styles -%}
{%- assign button_action = block.settings.button_action -%}
{%- assign button_autoplay = block.settings.button_autoplay -%}
{%- assign button_border_color = block.settings.button_border_color -%}
{%- assign button_color = block.settings.button_color -%}
{%- assign button_content = block.settings.button_text -%}
{%- assign button_controls = block.settings.button_controls -%}
{%- assign button_interaction = block.settings.button_interaction -%}
{%- assign button_loop = block.settings.button_loop -%}
{%- assign button_product = block.settings.button_product -%}
{%- assign button_text_color = block.settings.button_text_color -%}
{%- assign button_thumbnail = block.settings.button_thumbnail -%}
{%- assign button_classes = button_classes | append: ' col-12 rounded-5' -%}

{%- if enable_product_button -%}
  {%- if button_content == blank -%}
    {%- if button_action == "add_to_cart" -%}
      {%- assign button_content = "features.atc.start" | t -%}
      {%- elsif button_action == "buy_now" -%}
        {%- assign button_content = "features.atc.now" | t -%}
      {%- else -%}
        {%- assign button_content = "features.atc.start" | t -%}
    {%- endif -%}
  {%- endif -%}

  {%- if template == "product" -%}
    {%- assign button_product = featured_product -%}
    {%- else -%}
      {%- assign button_product = featured_product -%}
  {%- endif -%}

{%- endif -%}

{%- if enable_button_styles -%}
  {%- capture button_styles -%}
    {%- if button_color != blank -%}
      background-color: {{ button_color }};
    {%- endif -%}

    {%- if button_border_color != blank -%}
      border-color: {{ button_border_color }};
      {%- elsif button_color != blank -%}
        border-color: {{ button_color }};
    {%- endif -%}

    {%- if button_text_color != blank -%}
      color: {{ button_text_color }};
    {%- endif -%}
  {%- endcapture -%}
{%- endif -%}

{%- render 'bm-btn-block-logic-filter',
  button_action: button_action,
  button_alignment_desk: block.settings.horiz_align_desk,
  button_alignment_phone: block.settings.horiz_align_phone,
  button_alignment_tablet: block.settings.horiz_align_tablet,
  button_attributes: button_attributes,
  button_classes: button_classes,
  button_content: button_content,
  button_font_size: block.settings.button_font_size,
  button_font_size_tablet: block.settings.button_font_size_tablet,
  button_font_size_desk: block.settings.button_font_size_desk,
  button_margin: block.settings.block_margin,
  button_product: button_product,
  button_product_form: button_product_form,
  button_product_two: block.settings.button_product_two,
  button_radius: block.settings.button_radius,
  button_route: block.settings.button_route
  button_size: block.settings.button_size,
  button_size_tablet: block.settings.button_size_tablet,
  button_size_desk: block.settings.button_size_desk,
  button_styles: button_styles,
  button_template: block.settings.button_template,
  button_visibility: block.settings.block_visibility,
  button_wrap_breakpoint: block.settings.button_wrap_breakpoint,
  text_alignment_desk: text_alignment_desk,
  text_alignment_tablet: text_alignment_tablet,
  text_alignment_phone: text_alignment_phone,
  enable_product_button: enable_product_button,
  product_variant_selection: product_variant_selection -%}
